<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi tiết đơn hàng - Sport Store</title>
    <link href="/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link href="/css/sb-admin-2.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,300,400,700,900" rel="stylesheet">
</head>
<body id="page-top">

<div th:replace="~{fragment/layout :: layout(~{::section})}">
    <section>
        <!-- Main Content -->
        <div class="container-fluid">
            <h1 class="h4 mb-4 text-primary font-weight-bold">Chi tiết đơn hàng
                <span id="bill-id" th:text="${bill.bill_id}"></span>
            </h1>

            <!-- Thay thế phần table hiện tại -->
            <div class="table-responsive">
                <table id="orderDetailTable" class="table table-bordered">
                    <thead>
                    <tr>
                        <th>Mã chi tiết</th>
                        <th>Mã tùy chọn</th>
                        <th>Tên sản phẩm</th>
                        <th>Màu sắc</th>
                        <th>Size</th>
                        <th>Hàng tồn</th>
                        <th>Đơn giá</th>
                        <th>Số lượng</th>
                        <th>Thành tiền</th>
                    </tr>
                    </thead>
                    <tbody id="orderDetail-list"></tbody>
                </table>
                <p>
                    <strong>Tổng cộng:</strong>
                    <span id="order-total"></span>
                </p>
            </div>
            <div>
                <p>
                    <strong>Trạng thái đơn hàng</strong>
                    <span th:if="${bill.is_active && bill.employees == null}">Chưa xác nhận</span>
                    <span th:if="${bill.is_active && bill.employees != null && bill.bill_receive_date==null}">Đã xác nhận</span>
                    <span th:if="${!bill.is_active && bill.employees != null}">Đơn hàng bị hủy bởi nhân viên</span>
                    <span th:if="${!bill.is_active && bill.employees == null}">Đơn hàng bị hủy bởi khách hàng</span>
                    <span th:if="${bill.bill_receive_date !=null}">Hoàn thành</span>
                </p>
            </div>
            <!-- Buttons -->
            <div th:if="${session.role=='EMPLOYEE' && bill.bill_confirm_date==null && bill.is_active}"
                 class="text-center mt-4">
                <button class="btn btn-success mr-2" th:attr="onclick=|employee_confirmOrder('${bill.bill_id}')|">
                    <i class="fas fa-check mr-1"></i> Xác nhận đơn hàng
                </button>
                <button class="btn btn-danger" th:attr="onclick=|employee_cancelOrder('${bill.bill_id}')|">
                    <i class="fas fa-times mr-1"></i> Hủy đơn hàng
                </button>
            </div>
        </div>
</section>
</div>

<!-- Scripts -->
<script src="/vendor/jquery/jquery.min.js"></script>
<script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/vendor/jquery-easing/jquery.easing.min.js"></script>
<script src="/js/sb-admin-2.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/5.5.2/bootbox.min.js"></script>
<script th:src="@{/js/call_api/employee/manage_bill_detail.js}"></script>
<script th:src="@{/js/call_api/apiRequest_Func.js}"></script>
<script th:src="@{/js/call_api/account/logout.js}"></script>
</body>
</html>